<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ainsley Denham">
<meta name="author" content="Melissa May">
<meta name="author" content="Ava Madalinski">

<title>Lab 7</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="Lab 7">
<meta name="citation_author" content="Ainsley Denham">
<meta name="citation_author" content="Melissa May">
<meta name="citation_author" content="Ava Madalinski">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Global impact of chemicals and toxic substances on human health and the environment;,citation_author=Francis O Adeola;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_journal_title=Handbook of global health;,citation_publisher=Springer;">
<meta name="citation_reference" content="citation_title=Combined toxic exposures and human health: Biomarkers of exposure and effect;,citation_author=Ilona Silins;,citation_author=Johan Högberg;,citation_publication_date=2011;,citation_cover_date=2011;,citation_year=2011;,citation_issue=3;,citation_volume=8;,citation_journal_title=International journal of environmental research and public health;,citation_publisher=Molecular Diversity Preservation International (MDPI);">
<meta name="citation_reference" content="citation_title=Understanding the human health effects of chemical mixtures.;,citation_author=David O Carpenter;,citation_author=Kathleen Arcaro;,citation_author=David C Spink;,citation_publication_date=2002;,citation_cover_date=2002;,citation_year=2002;,citation_issue=suppl 1;,citation_volume=110;,citation_journal_title=Environmental health perspectives;">
<meta name="citation_reference" content="citation_title=Understanding emerging environmental health concerns and environmental public health–tracking priorities among state and local professionals in colorado;,citation_author=Jacquelyn A Murphy;,citation_author=Jennifer L Peel;,citation_author=Tom Butts;,citation_author=Lisa M McKenzie;,citation_author=Jill S Litt;,citation_publication_date=2021;,citation_cover_date=2021;,citation_year=2021;,citation_issue=6;,citation_volume=27;,citation_journal_title=Journal of Public Health Management and Practice;,citation_publisher=LWW;">
<meta name="citation_reference" content="citation_title=Prepared by the colorado department of public health and environment;,citation_author=UTE-ULAY TOWNSITE;,citation_author=BROWNFIELD ASSESSMENT SITE;,citation_publication_date=2013;,citation_cover_date=2013;,citation_year=2013;,citation_publisher=Citeseer;">
<meta name="citation_reference" content="citation_title=Impact of air pollution on asthma outcomes;,citation_author=Angelica I Tiotiu;,citation_author=Plamena Novakova;,citation_author=Denislava Nedeva;,citation_author=Herberto Jose Chong-Neto;,citation_author=Silviya Novakova;,citation_author=Paschalis Steiropoulos;,citation_author=Krzysztof Kowal;,citation_publication_date=2020;,citation_cover_date=2020;,citation_year=2020;,citation_issue=17;,citation_volume=17;,citation_journal_title=International journal of environmental research and public health;,citation_publisher=MDPI;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Lab 7</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
        
        <div class="quarto-title-meta">

                <div>
            <div class="quarto-title-meta-heading">Authors</div>
            <div class="quarto-title-meta-contents">
                        <p>Ainsley Denham </p>
                        <p>Ava Medalinski </p>
                        <p>Melissa May </p>
                      </div>
          </div>
                
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      </div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-1-toxic-release-inventory-tri-basic-data" id="toc-data-1-toxic-release-inventory-tri-basic-data" class="nav-link active" data-scroll-target="#data-1-toxic-release-inventory-tri-basic-data">Data 1: Toxic Release Inventory (TRI) Basic data</a></li>
  <li><a href="#data-2-air-quality-data-coepht" id="toc-data-2-air-quality-data-coepht" class="nav-link" data-scroll-target="#data-2-air-quality-data-coepht">Data 2: Air quality data COEPHT</a></li>
  <li><a href="#data-3-asthma" id="toc-data-3-asthma" class="nav-link" data-scroll-target="#data-3-asthma">Data 3: Asthma</a></li>
  <li><a href="#data-4-lead-poisoning" id="toc-data-4-lead-poisoning" class="nav-link" data-scroll-target="#data-4-lead-poisoning">Data 4: Lead Poisoning</a></li>
  <li><a href="#data-5-public-drinking-water" id="toc-data-5-public-drinking-water" class="nav-link" data-scroll-target="#data-5-public-drinking-water">Data 5: Public Drinking Water</a></li>
  <li><a href="#data-visualization" id="toc-data-visualization" class="nav-link" data-scroll-target="#data-visualization">Data visualization</a></li>
  <li><a href="#air-quality-data-visualization---distribution-of-ozone-days-over-standard" id="toc-air-quality-data-visualization---distribution-of-ozone-days-over-standard" class="nav-link" data-scroll-target="#air-quality-data-visualization---distribution-of-ozone-days-over-standard">Air Quality data visualization - distribution of ozone days over standard</a></li>
  <li><a href="#public-drinking-water-data-visualization---max-vs-average-concentration" id="toc-public-drinking-water-data-visualization---max-vs-average-concentration" class="nav-link" data-scroll-target="#public-drinking-water-data-visualization---max-vs-average-concentration">Public drinking water data visualization - max vs average concentration</a></li>
  <li><a href="#two-data-tests" id="toc-two-data-tests" class="nav-link" data-scroll-target="#two-data-tests">Two Data Tests</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li><a href="#preliminary-methods" id="toc-preliminary-methods" class="nav-link" data-scroll-target="#preliminary-methods">Preliminary Methods</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="Lab_7-preview.html"><i class="bi bi-journal-code"></i>Article Notebook</a></li><li><a href="Lab_9-preview.html"><i class="bi bi-journal-code"></i>Lab 9</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<p>#Introduction</p>
<p>Every day, Colorado residents are subjected to numerous chemical exposures in their surrounding environment – through the air they breathe, water they consume, soil that grows their food, and their various occupational settings. Despite this near-constant exposure, our understanding of how to effectively track these diverse chemicals and evaluate their associated health risks remains inadequate <span class="citation" data-cites="silins2011">(<a href="#ref-silins2011" role="doc-biblioref">Silins &amp; Högberg, 2011</a>)</span>. The improper management of toxic substances and their unregulated release into ecosystems creates significant public health challenges, contributing to various adverse outcomes ranging from acute poisonings to chronic diseases and increased mortality rates throughout communities worldwide <span class="citation" data-cites="adeola2020">(<a href="#ref-adeola2020" role="doc-biblioref">Adeola, 2020</a>)</span>.</p>
<p>The relationship between chemical exposure and health outcomes is shaped by complex dose-response patterns. As Adeola (2020) emphasizes, while these substances can enhance quality of life when properly utilized, excessive exposure often leads to severe consequences – including death, persistent disabilities, reproductive complications, and various chronic condition<span class="citation" data-cites="adeola2020">(<a href="#ref-adeola2020" role="doc-biblioref">Adeola, 2020</a>)</span>. This delicate balance underscores the urgency of investigating connections between environmental chemical releases and observable health patterns in exposed populations.</p>
<p>One major challenge in understanding these relationships stems from the complexity of real-world chemical exposures. Most toxicological research examines individual chemicals in isolation, yet environmental exposures always involve mixtures of chemicals rather than single compounds. As noted in the literature, when multiple substances interact within biological systems, they may produce additive, nonadditive, or even synergistic effects, where the combined impacts exceed the sum of individual effects. These interactions become exponentially more complex as the number of chemicals increases, with each mixture potentially producing unique outcomes depending on its specific composition <span class="citation" data-cites="carpenter2002">(<a href="#ref-carpenter2002" role="doc-biblioref">Carpenter, Arcaro, &amp; Spink, 2002</a>)</span>. This complexity partially explains why chemical mixtures remain understudied despite their relevance to public health. The methodological challenges in analyzing multiple simultaneous exposures have created significant knowledge gaps regarding their cumulative impacts on human populations. Traditional risk assessment approaches often fail to account for these interactive effects, potentially underestimating the true health burden of environmental chemical exposure in communities with multiple pollution sources.</p>
<p>Colorado presents a particularly relevant setting for examining these relationships due to its unique environmental and public health landscape. The state is experiencing dramatic changes related to population growth, climate change, and expanded industrial activity, creating new and intensifying environmental health challenges <span class="citation" data-cites="murphy2021">(<a href="#ref-murphy2021" role="doc-biblioref">Murphy, Peel, Butts, McKenzie, &amp; Litt, 2021</a>)</span>. These demographic and industrial shifts have placed increasing pressure on public health professionals attempting to address emerging environmental health issues with limited resources. According to research by Murphy and colleagues (2021), Colorado’s public health professionals identify indoor and outdoor air pollution among their top environmental health concerns, with oil and gas development recognized as a major contributing factor alongside transportation and extreme weather events <span class="citation" data-cites="murphy2021">(<a href="#ref-murphy2021" role="doc-biblioref">Murphy et al., 2021</a>)</span>.</p>
<p>These statewide concerns are not merely theoretical – they are deeply rooted in tangible, historical, and ongoing examples of environmental contamination. One such case is the Ute-Ulay Townsite in Hinsdale County, Colorado, a historic mining complex located near Lake City in the San Juan Mountains <span class="citation" data-cites="townsite2013">(<a href="#ref-townsite2013" role="doc-biblioref">TOWNSITE &amp; SITE, 2013</a>)</span>. Mining activity at the Ute-Ulay dates back to the late 1800s, continuing intermittently into the 20th century, and leaving behind a legacy of industrial contamination. In the early 2000s, as the site became a candidate for revitalization through a Targeted Brownfields Assessment, environmental health officials raised concerns about potential hazards posed by legacy mine waste. A Phase II Environmental Site Assessment conducted by the Colorado Department of Public Health and Environment (CDPHE) identified significant contamination in the form of a 1,500-cubic-foot waste rock pile and a graded ore area, both containing elevated levels of lead – a toxic heavy metal with well-documented health risks. Given the site’s planned reuse for recreational and educational purposes, including interpretive tours and a hostel, the potential for increased public exposure heightened the urgency of health risk evaluations. In collaboration with the Agency for Toxic Substances and Disease Registry (ATSDR), the CDPHE initiated a health consultation to assess future exposure risks, particularly for children and adult workers, and to provide recommendations aimed at protecting public health. The first dataset we will be using is the asthma data set from Colorado Environmental Public Health Tracking. This data tells us the rates of hospitalizations and emergency department visits among Colorado residents per county per calendar year. However, this data set does not tell us about people who currently have or experience this condition or people who did not receive medical care for their asthma, therefore the data set only represents more severe cases. The next data set we are using is the air quality data set, also from the Colorado Environmental Public Health Tracking. This data gives us two metrics of yearly measurements of ozone per county and four metrics for fine particulate matter smaller than 2.5 microns. One limitation of this data set is that these measurements are taken at fixed points in the counties, which may not be indicative of the air quality in the whole county, as it can vary greatly. We are also using the childhood lead poisoning data set, from Colorado Environmental Public Health Tracking as well. This data ​​provides information about blood lead testing and blood lead levels among children born in the same year. However, it only gives us data for children who were tested, which tend to be at a higher risk for lead poisoning. In addition, we used the public drinking water quality data set from Colorado Environmental Public Health Tracking. This data gives us arsenic levels in the public drinking water of Colorado. Our final data set is from the Toxic Release Inventory from the EPA. This data gives us chemical classifications and names of persistent bioaccumulative toxins and quantities of toxic chemicals released on-site, transferred off-site, and a summary of chemical releases, recycling, energy recovery, and treatment. The method we have chosen to analyze our data is correlation analysis test. Using a Shaprio-Wilks normality test, we will decide if any of the data is skewed, and therefore needs to be transformed using the appropriate transformation. Then, we will apply a Pearson or Spearman correlation test to look at the correlation between our datasets, air quality and asthma rates, and water quality and lead poisoning.</p>
<section id="data-1-toxic-release-inventory-tri-basic-data" class="level1">
<h1>Data 1: Toxic Release Inventory (TRI) Basic data</h1>
<p>The TRI (Toxic Release Inventory) contains: Chemical classifications and names of persistent bioaccumulative toxins State, national, federal facility, and tribal data files Quantities of toxic chemicals released on-site, transferred off-site, and a summary of chemical releases, recycling, energy recovery, and treatment</p>
</section>
<section id="data-2-air-quality-data-coepht" class="level1">
<h1>Data 2: Air quality data COEPHT</h1>
<p>The air quality data contains: The kind of pollutant (PM 2.5 or Ozone/O3) The annual average concentration The percentage of days in the year where the NAAQS was exceeded The population living in the specific category The percentage of the state population living in that category We will use this air quality data to see if some areas have worse air quality than others, and try and find a correlation between those areas and cases of respiratory and heart diseases</p>
</section>
<section id="data-3-asthma" class="level1">
<h1>Data 3: Asthma</h1>
<p>This dataset contains asthma data: From 2011-2023 The rates out of 10,000 people had asthma, a heart attack, and COPD The rates out of 100,000 people of had CO poisoning and heat-related illnesses The age groups We will use this data to try and prove there is a correlation between air quality and cases of asthma. We will try and see if a certain area that has poor air quality also has higher cases of respiratory and heart issues</p>
</section>
<section id="data-4-lead-poisoning" class="level1">
<h1>Data 4: Lead Poisoning</h1>
<p>The lead poisoning data contains: Age groups Population estimates (state and county) Number of children tested for blood lead level (county and state) The percentage of blood lead tests falling into designated ranges We will use this data to see if there are some areas with higher cases of lead poisoning and try and determine if there is a correlation between those areas with poor drinking water.</p>
</section>
<section id="data-5-public-drinking-water" class="level1">
<h1>Data 5: Public Drinking Water</h1>
<p>The public drinking water dataset contains: The county Average concentration Info about the various public water systems where the data was collected We will use this data to find areas with poor drinking water and see if there is also a higher than average amount of lead poisoning cases.</p>
</section>
<section id="data-visualization" class="level1">
<h1>Data visualization</h1>
</section>
<section id="air-quality-data-visualization---distribution-of-ozone-days-over-standard" class="level1">
<h1>Air Quality data visualization - distribution of ozone days over standard</h1>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="Lab_7_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="Lab_7_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="Lab_7-preview.html">Source: Article Notebook</a></div>
</section>
<section id="public-drinking-water-data-visualization---max-vs-average-concentration" class="level1">
<h1>Public drinking water data visualization - max vs average concentration</h1>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="Lab_7_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="Lab_7_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="two-data-tests" class="level1">
<h1>Two Data Tests</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   1.000   5.000   9.354  14.000  52.000 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  days_over_standard by county
t = -5.2069, df = 23.23, p-value = 2.714e-05
alternative hypothesis: true difference in means between group Denver and group Larimer is not equal to 0
95 percent confidence interval:
 -22.702492  -9.797508
sample estimates:
 mean in group Denver mean in group Larimer 
                 5.45                 21.70 </code></pre>
</div>
</div>
</section>
<section id="data-cleaning" class="level1">
<h1>Data Cleaning</h1>
<p>For our initial data cleaning, the first step we’ll take will be to remove or handle missing values. We can use colSums to identify the number of NA values within the dataset, as well as na.omit to ensure that our dataset actually removes the NA values.</p>
<p>We’ll also likely have to standardize the column names across the multiple databases we’re using, making them consistent and easier to work with. We can use the make.names or the rename functions to standardize any names that aren’t uniform throughout the datasets.</p>
<p>If we decide further into the project that we want to focus on specific variables, we can easily filter out irrelevant rows or columns that don’t matter to our dataset’s focus. We can also remove duplicates from the datasets to make sure that none of our data are repeating and contributing unequally to the visualizations.</p>
<p>One of the biggest steps we’ll have to take to clean the data that became more apparent when we started doing tests and making visualizations is simply condensing the size of the datasets. The public water one, for example, was so large that it lagged in rendering and would slow down the rest of our project if we continued using it in this form.</p>
</section>
<section id="preliminary-methods" class="level1">
<h1>Preliminary Methods</h1>
<p>We are thinking of using a correlation analysis to look at the relationships between the toxic chemical release and the public health outcomes. Specifically, we will look at the correlation between the air quality data and the asthma data and the water quality data and the lead poisoning data. In addition, we will add 2023 US data to look at other correlations with different types of toxic releases. It’s possible we might need some supplemental spatial data to see where the toxic releases are coming from and if they affect any communities more than others. This spatial data could also help explain why or why not there are correlations between the variables in our other data sets. One potential challenge I see is that our data sets are very large and have more information than we need to make these correlations. It might be a challenge to filter and clean the data sets simply because of their large size. Another challenge when looking at the air and water quality data sets is deciphering whether low quality can be attributed to genuine toxic release or just natural disturbances, such as wildfires or other natural occurrences. One potential challenge we can foresee with our selected methods is that the data might not be normally distributed. However, we can attempt to fix this with a transformation that is applicable to how the data is skewed. Our selected method, a correlation analysis test, will allow us to get to our final goal of looking at how air/water quality is related to public health in Colorado. Through using a Pearson or Spearman test, we can see what, if any, correlations there are between the indicators we have chosen, asthma and lead poisoning, and the quality of the environment.</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-adeola2020" class="csl-entry" role="listitem">
Adeola, F. O. (2020). Global impact of chemicals and toxic substances on human health and the environment. <em>Handbook of Global Health</em>, 1–30.
</div>
<div id="ref-carpenter2002" class="csl-entry" role="listitem">
Carpenter, D. O., Arcaro, K., &amp; Spink, D. C. (2002). Understanding the human health effects of chemical mixtures. <em>Environmental Health Perspectives</em>, <em>110</em>(suppl 1), 25–42.
</div>
<div id="ref-murphy2021" class="csl-entry" role="listitem">
Murphy, J. A., Peel, J. L., Butts, T., McKenzie, L. M., &amp; Litt, J. S. (2021). Understanding emerging environmental health concerns and environmental public health–tracking priorities among state and local professionals in colorado. <em>Journal of Public Health Management and Practice</em>, <em>27</em>(6), 598–606.
</div>
<div id="ref-silins2011" class="csl-entry" role="listitem">
Silins, I., &amp; Högberg, J. (2011). Combined toxic exposures and human health: Biomarkers of exposure and effect. <em>International Journal of Environmental Research and Public Health</em>, <em>8</em>(3), 629–647.
</div>
<div id="ref-townsite2013" class="csl-entry" role="listitem">
TOWNSITE, U.-U., &amp; SITE, B. A. (2013). <em>Prepared by the colorado department of public health and environment</em>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","closeEffect":"zoom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>